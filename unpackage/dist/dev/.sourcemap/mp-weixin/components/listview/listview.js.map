{"version":3,"sources":["webpack:///D:/UNI-app/first-demo/components/listview/listview.vue?91ad","webpack:///D:/UNI-app/first-demo/components/listview/listview.vue?2f7c","webpack:///D:/UNI-app/first-demo/components/listview/listview.vue?ae65","webpack:///D:/UNI-app/first-demo/components/listview/listview.vue?c747","webpack:///D:/UNI-app/first-demo/components/listview/listview.vue","webpack:///D:/UNI-app/first-demo/components/listview/listview.vue?4a79"],"names":["TITLE_HEIGHT","ANCHOR_HEIGHT","props","data","type","Array","default","computed","shortcutList","map","group","title","substr","fixedTitle","scrollY","currentIndex","diff","created","probeType","listenScroll","touch","listHeight","methods","selectItem","item","$emit","onShortcutTouchStart","e","anchorIndex","target","firstTouch","touches","y1","pageY","_scrollTo","onShortcutTouchMove","y2","delta","parseInt","refresh","$refs","listview","scroll","pos","y","_calculateHeight","list","listGroup","height","push","i","length","clientHeight","index","scrollToElement","watch","setTimeout","newY","height1","height2","newVal","fixedTop","fixed","style","transform","components","Scroll"],"mappings":"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","file":"components/listview/listview.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./listview.vue?vue&type=template&id=95f2d5c8&scoped=true&\"\nvar renderjs\nimport script from \"./listview.vue?vue&type=script&lang=js&\"\nexport * from \"./listview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./listview.vue?vue&type=style&index=0&id=95f2d5c8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95f2d5c8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('95f2d5c8')) {\n      api.createRecord('95f2d5c8', component.options)\n    } else {\n      api.reload('95f2d5c8', component.options)\n    }\n    module.hot.accept(\"./listview.vue?vue&type=template&id=95f2d5c8&scoped=true&\", function () {\n      api.rerender('95f2d5c8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"UNI-app/first-demo/components/listview/listview.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./listview.vue?vue&type=template&id=95f2d5c8&scoped=true&\"","var components = {\n  scroll: () =>\n    import(/* webpackChunkName: \"components/scroll/scroll\" */ \"@/components/scroll/scroll.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./listview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./listview.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Scroll from '../scroll/scroll.vue'\n// import Loading from 'base/loading/loading'\nimport {getData} from '../../common/js/dom.js'\n\nconst TITLE_HEIGHT = 30\nconst ANCHOR_HEIGHT = 18\n\nexport default {\n  props: {\n    data: {\n      type: Array,\n      default: []\n    }\n  },\n  computed: {\n    shortcutList() {\n      return this.data.map((group) => {\n        return group.title.substr(0, 1)\n      })\n    },\n    fixedTitle() {\n      if (this.scrollY > 0) {\n        return ''\n      }\n      return this.data[this.currentIndex] ? this.data[this.currentIndex].title : ''\n    }\n  },\n  data() {\n    return {\n      scrollY: -1,\n      currentIndex: 0,\n      diff: -1\n    }\n  },\n  created() {\n    this.probeType = 3\n    this.listenScroll = true\n    this.touch = {}\n    this.listHeight = []\n  },\n  methods: {\n    selectItem(item) {\n      this.$emit('select', item)\n    },\n    onShortcutTouchStart(e) {\n      let anchorIndex = getData(e.target, 'index')\n      let firstTouch = e.touches[0]\n      this.touch.y1 = firstTouch.pageY\n      this.touch.anchorIndex = anchorIndex\n\n      this._scrollTo(anchorIndex)\n    },\n    onShortcutTouchMove(e) {\n      let firstTouch = e.touches[0]\n      this.touch.y2 = firstTouch.pageY\n      let delta = (this.touch.y2 - this.touch.y1) / ANCHOR_HEIGHT | 0\n      let anchorIndex = parseInt(this.touch.anchorIndex) + delta\n\n      this._scrollTo(anchorIndex)\n    },\n    refresh() {\n      this.$refs.listview.refresh()\n    },\n    scroll(pos) {\n      this.scrollY = pos.y\n    },\n    _calculateHeight() {\n      this.listHeight = []\n      const list = this.$refs.listGroup\n      let height = 0\n      this.listHeight.push(height)\n      for (let i = 0; i < list.length; i++) {\n        let item = list[i]\n        height += item.clientHeight\n        this.listHeight.push(height)\n      }\n    },\n    _scrollTo(index) {\n      if (!index && index !== 0) {\n        return\n      }\n      if (index < 0) {\n        index = 0\n      } else if (index > this.listHeight.length - 2) {\n        index = this.listHeight.length - 2\n      }\n      this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0)\n      this.scrollY = this.$refs.listview.scroll.y\n    }\n  },\n  watch: {\n    data() {\n      setTimeout(() => {\n        this._calculateHeight()\n      }, 20)\n    },\n    scrollY(newY) {\n      const listHeight = this.listHeight\n      // 当滚动到顶部，newY>0\n      if (newY > 0) {\n        this.currentIndex = 0\n        return\n      }\n      // 在中间部分滚动\n      for (let i = 0; i < listHeight.length - 1; i++) {\n        let height1 = listHeight[i]\n        let height2 = listHeight[i + 1]\n        if (-newY >= height1 && -newY < height2) {\n          this.currentIndex = i\n          this.diff = height2 + newY\n          return\n        }\n      }\n      // 当滚动到底部，且-newY大于最后一个元素的上限\n      this.currentIndex = listHeight.length - 2\n    },\n    diff(newVal) {\n      let fixedTop = (newVal > 0 && newVal < TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0\n      if (this.fixedTop === fixedTop) {\n        return\n      }\n      this.fixedTop = fixedTop\n      this.$refs.fixed.style.transform = `translate3d(0,${fixedTop}px,0)`\n    }\n  },\n  components: {\n    Scroll,\n   \n  }\n}\n\n","import mod from \"-!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-1!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--11-oneOf-1-2!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./listview.vue?vue&type=style&index=0&id=95f2d5c8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-1!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--11-oneOf-1-2!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./listview.vue?vue&type=style&index=0&id=95f2d5c8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\""],"sourceRoot":""}